@using System.Threading.Tasks
@using DispatcherWeb.Infrastructure
@using DispatcherWeb.Quotes.Dto
@using DispatcherWeb.Web.Areas.App.Models.Common.Modals
@using DispatcherWeb.Web.Areas.App.Models.LeaseHaulers
@model DispatcherWeb.Web.Areas.App.Models.LeaseHaulers.SendMessageModalViewModel
@await Html.PartialAsync("~/Areas/app/Views/Common/Modals/_ModalHeader.cshtml", new ModalHeaderViewModel(Model.MessageType == LeaseHaulerMessageType.Sms ? "Send SMS Message" : "Send Email Message"))

<div class="modal-body">
    <form role="form" novalidate class="form-validation">
        <input type="hidden" asp-for="LeaseHaulerId" />
        <input type="hidden" asp-for="MessageType" />
        @if (Model.MessageType == LeaseHaulerMessageType.Email)
        {
            <div class="form-group">
                <label class="required-label">Subject</label>
                <input class="form-control" type="text" name="Subject" maxlength="@EntityStringFieldLengths.DriverMessage.Subject" required>
            </div>
        }
        <div class="form-group">
            <label class="required-label">Body</label>
            <textarea type="text" class="form-control" rows="5" name="Body" maxlength="@EntityStringFieldLengths.DriverMessage.Body" required></textarea>
        </div>
        <div class="form-group">
            <label class="required-label">Send To</label>
            <select class="form-control" name="ContactIds" id="ContactIds" multiple="multiple" required>
                @if(Model.Contacts != null)
                {
                    foreach (var contact in Model.Contacts.Items)
                    {
                        <option value="@contact.Id" selected="@(contact.IsDefault ? "selected" : null)">@contact.Name</option>
                    }
                }
            </select>
        </div>

    </form>
</div>

<div class="modal-footer">
    <button type="button" class="btn btn-default close-button" data-dismiss="modal">Cancel</button>
    <button type="button" class="btn btn-primary save-button"><i class="fa fa-save"></i> <span>Send</span></button>
</div>