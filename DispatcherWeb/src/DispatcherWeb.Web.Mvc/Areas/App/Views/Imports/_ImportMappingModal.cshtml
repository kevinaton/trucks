@using System.Threading.Tasks
@using DispatcherWeb.Web.Areas.App.Models.Common.Modals
@model DispatcherWeb.Web.Areas.App.Models.Imports.ImportMappingViewModel
@await Html.PartialAsync("~/Areas/app/Views/Common/Modals/_ModalHeader.cshtml", new ModalHeaderViewModel("Map fields for import"))

<div class="modal-body">
    <form role="form" novalidate class="form-validation" data-getfields-url="@Url.Action("GetImportFields", "Imports")">
        <input type="hidden" asp-for="BlobName" />
        <input type="hidden" asp-for="ImportType" />

        <div style="max-height: 500px; width: 100%; margin: 0; overflow-y: auto;">
            <table class="table table-striped table-bordered" style="margin: 0; padding: 0;">
                <tr>
                    <th style="width: 50%">CSV headings</th>
                    <th>Fields</th>
                </tr>
                @foreach (string field in Model.CsvFields)
                {
                    <tr>
                        <td style="vertical-align: middle;">@field</td>
                        <td>
                            <select data-field="@field">
                                <option value="">-Ignore-</option>
                            </select>
                        </td>
                    </tr>
                }
            </table>
        </div>
        &nbsp;
        <div id="RequiredFields">
            Required fields to map: <span></span>
        </div>
    </form>
</div>

<div class="modal-footer">
    <button type="button" class="btn default close-button" data-delete-url="@Url.Action("DeleteDonorFile")">Cancel</button>
    <button type="button" class="btn blue save-button"><i class="fas fa-file-import"></i> <span>Import Data</span></button>
</div>
